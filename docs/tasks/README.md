# RefNet 開発フェーズ管理

## 概要

RefNet論文関係性可視化システムの開発を効率的に進めるため、機能と依存関係に基づいて4つのフェーズに分割して実装します。各フェーズは明確な目的と完了条件を持ち、次のフェーズの前提条件となります。

## フェーズ構成

### Phase 1: プロジェクト基盤構築
**目的**: 開発環境とプロジェクト構造の確立
**期間**: 4-5時間
**依存関係**: なし（プロジェクト開始点）

- プロジェクト全体構造の作成
- Monorepo環境の構築
- 共通ライブラリの基盤設定
- 環境設定管理システム

### Phase 2: データ基盤構築
**目的**: データモデルと永続化層の確立
**期間**: 4-5時間
**依存関係**: Phase 1完了

- SQLAlchemyモデル定義
- データベースマイグレーション設定
- 共通データアクセス層

### Phase 3: コアサービス開発
**目的**: ビジネスロジックとAPIの実装
**期間**: 16-20時間（並列開発可能）
**依存関係**: Phase 2完了

- APIゲートウェイサービス
- クローラーサービス
- 要約サービス
- Markdownジェネレーター

### Phase 4: インフラ・運用
**目的**: 本番運用に必要なインフラと運用機能
**期間**: 8-10時間（一部並列開発可能）
**依存関係**: Phase 3の基本機能完了

- Docker統合環境
- 監視・アラート機能
- セキュリティ・認証機能
- バッチ処理・スケジューリング

## 並列開発戦略

### Phase 1-2: 順次実行必須
- 全体の基盤となるため、順序通りに実行
- 一人の開発者が集中して実施

### Phase 3: 完全並列開発可能
- 各サービスは独立したworktreeで開発
- 4人の開発者が同時並行で実装可能
- 依存関係は共通基盤（Phase 2）のみ

### Phase 4: 部分並列開発可能
- Docker設定は独立して開始可能
- 監視・セキュリティは Phase 3 の基本機能完了後
- 2-3人の開発者で並列実装可能

## 完了基準

### 各フェーズの完了条件
- すべてのタスクの完了条件を満たす
- `moon :check` が全パッケージで正常終了
- フェーズ固有の統合テストが通る
- 次フェーズの前提条件が整備されている

### プロジェクト全体の完了条件
- 全フェーズの完了
- 論文取得→要約→Markdown生成の完全フローが動作
- Obsidianで論文ネットワークが可視化される
- 本番環境での安定稼働が可能

## 見積もり時間

| フェーズ | 順次実行時間 | 並列実行時間 | 最大並列人数 |
|----------|-------------|-------------|-------------|
| Phase 1 | 4-5時間 | 4-5時間 | 1人 |
| Phase 2 | 4-5時間 | 4-5時間 | 1人 |
| Phase 3 | 16-20時間 | 4-5時間 | 4人 |
| Phase 4 | 8-10時間 | 3-4時間 | 3人 |
| **合計** | **32-40時間** | **15-19時間** | **最大4人** |

並列開発により、約**60%の時間短縮**が期待できます。

## Git Worktree戦略

### Phase 1-2: メインブランチ
```bash
cd ~/project/ref-net
# Phase 1, 2はメインブランチで順次実行
```

### Phase 3: 各サービス用Worktree
```bash
# 各サービス用のworktree作成
git worktree add ../ref-net-worktrees/api claude/api-$(date +'%Y%m%d%H%M%S')
git worktree add ../ref-net-worktrees/crawler claude/crawler-$(date +'%Y%m%d%H%M%S')
git worktree add ../ref-net-worktrees/summarizer claude/summarizer-$(date +'%Y%m%d%H%M%S')
git worktree add ../ref-net-worktrees/generator claude/generator-$(date +'%Y%m%d%H%M%S')
```

### Phase 4: インフラ用Worktree
```bash
git worktree add ../ref-net-worktrees/infra claude/infra-$(date +'%Y%m%d%H%M%S')
```

## 品質管理

### 各フェーズで実施
- コーディング規約チェック（ruff）
- 型チェック（mypy）
- 単体テスト実行（pytest）
- テストカバレッジ80%以上

### フェーズ間で実施
- 統合テスト
- パフォーマンステスト（Phase 3以降）
- セキュリティチェック（Phase 4）

## 次のステップ

1. **Phase 1**: `phase_01/README.md` を参照してプロジェクト基盤構築を開始
2. **並列開発準備**: Phase 2完了後、worktree環境を構築
3. **チーム開発**: Phase 3でチームメンバーに各サービスを割り当て
4. **運用準備**: Phase 4で本番運用機能を実装

詳細な実装手順は各フェーズディレクトリ内のREADME.mdとタスクファイルを参照してください。
