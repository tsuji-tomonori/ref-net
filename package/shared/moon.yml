type: library
language: python

tasks:
  install:
    command: uv sync --extra dev
    inputs:
      - "pyproject.toml"
      - "uv.lock"

  lint:
    command: ruff check src/
    inputs:
      - "src/**/*.py"

  format:
    command: ruff format src/
    inputs:
      - "src/**/*.py"

  typecheck:
    command: mypy src/
    inputs:
      - "src/**/*.py"

  test:
    command: pytest tests/
    inputs:
      - "src/**/*.py"
      - "tests/**/*.py"

  build:
    command: python -m build
    inputs:
      - "src/**/*.py"
      - "pyproject.toml"
    outputs:
      - "dist/"

  check:
    deps:
      - lint
      - typecheck
      - test
