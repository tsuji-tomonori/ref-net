language: python
type: application
tasks:
  install:
    command: uv sync --dev
    options:
      cache: false

  lint:
    command: uv run --group dev ruff check .
    deps:
      - ~:install
    inputs:
      - 'src/**/*.py'
      - 'tests/**/*.py'

  format:
    command: uv run --group dev ruff format .
    deps:
      - ~:install
    inputs:
      - 'src/**/*.py'
      - 'tests/**/*.py'

  typecheck:
    command: uv run --group dev mypy src/
    deps:
      - ~:install
    inputs:
      - 'src/**/*.py'
      - 'tests/**/*.py'

  test:
    command: uv run --group dev pytest tests/
    deps:
      - ~:install
    inputs:
      - 'src/**/*.py'
      - 'tests/**/*.py'

  check:
    description: "Run lint, type checking, and tests"
    deps:
      - ~:lint
      - ~:typecheck
      - ~:test
